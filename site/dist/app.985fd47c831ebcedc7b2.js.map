{"version":3,"sources":["webpack:///app.985fd47c831ebcedc7b2.js","webpack:///./src/main.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/services/update.service.ts","webpack:///./src/app/light/light.component.ts","webpack:///./src/app/skybox/skybox.component.ts","webpack:///./assets/textures/skySphere_2.jpg","webpack:///./src/app/services/loader.service.ts","webpack:///./src/app/services/physics.service.ts","webpack:///./src/app/services/key.service.ts","webpack:///./assets/objects/bike_2.obj","webpack:///./assets/textures/tron.png","webpack:///./assets/objects/level_lennart_2.obj","webpack:///./assets/textures/road.jpg","webpack:///./src/app/app.component.html"],"names":["webpackJsonp","0","module","exports","__webpack_require__","platform_browser_dynamic_1","app_module_1","platformBrowserDynamic","bootstrapModule","AppModule","23","__decorate","this","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","core_1","platform_browser_1","app_component_1","NgModule","imports","BrowserModule","declarations","AppComponent","bootstrap","24","THREE","update_service_1","light_component_1","skybox_component_1","loader_service_1","physics_service_1","key_service_1","_updateService","_lightComponent","_loader","_physicsService","_keyService","_skyboxComponent","gui","speed","gravity","lapTime","loaded","level","user","skybox","general","dt","last","frame","keys","UP","DOWN","LEFT","RIGHT","state","dead","scene","Scene","camera","PerspectiveCamera","renderer","WebGLRenderer","prototype","handleKeyDown","event","onKeyPress","handleKeyUp","ngOnInit","loader","_this","light","addAmbientLight","pointLight","addPointLight","player","playerText","loadOBJ","then","res","name","handleLoaded","levelText","init","skyBox","loadType","ready","x","setup","reloadGame","position","y","z","rotation","copy","reset","animate","console","log","setupInitState","addObjectsToScene","addBoundingBoxesToScene","_canvas","nativeElement","appendChild","domElement","setupGravity","setSize","add","geometry2","BoxGeometry","material2","MeshBasicMaterial","visible","cube2","Mesh","now","Date","getTime","Math","min","render","requestAnimationFrame","update","obj","GravityCheck","lt","g","ViewChild","ElementRef","HostListener","Function","KeyboardEvent","Component","selector","template","providers","UpdateService","LightComponent","SkyboxComponent","LoaderService","PhysicsService","KeyService","call","26","acceleration","maxSpeed","generalCarSpeedMultiplier","direction","X","Z","Y","car","step","rotateX","rotateY","parseInt","cos","toFixed","sin","quaternion","slerp","27","color","whiteColor","AmbientLight","DirectionalLight","28","skyGeo","SphereGeometry","TextureLoader","Promise","resolve","reject","load","texture","material","MeshPhongMaterial","map","sky","side","BackSide","29","p","30","path","textureFile","manager","LoadingManager","onProgress","item","total","OBJLoader","wrapS","wrapT","RepeatWrapping","repeat","set","object","traverse","child","31","moment","groundList","collidableMeshList","rays","Vector3","caster","Raycaster","distanceAbove","distanceBelow","fallTime","intersect","startTime","children","material_1","geometry","push","deathBB","Box3","setFromObject","startLine","playerBB","death","max","laptime","checkForCollision","outcome","parseFloat","collisions","startCollisions","distance","intersectObjects","intersectObject","afterLap","utc","diff","seconds","143","keyDown","keyCode","144","145","146","147","148"],"mappings":"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","file":"app.985fd47c831ebcedc7b2.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar platform_browser_dynamic_1 = __webpack_require__(1);\r\n\tvar app_module_1 = __webpack_require__(23);\r\n\tplatform_browser_dynamic_1.platformBrowserDynamic().bootstrapModule(app_module_1.AppModule);\r\n\n\n/***/ },\n\n/***/ 23:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n\t};\r\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\r\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n\t};\r\n\tvar core_1 = __webpack_require__(3);\r\n\tvar platform_browser_1 = __webpack_require__(21);\r\n\tvar app_component_1 = __webpack_require__(24);\r\n\tvar AppModule = (function () {\r\n\t    function AppModule() {\r\n\t    }\r\n\t    return AppModule;\r\n\t}());\r\n\tAppModule = __decorate([\r\n\t    core_1.NgModule({\r\n\t        imports: [\r\n\t            platform_browser_1.BrowserModule\r\n\t        ],\r\n\t        declarations: [\r\n\t            app_component_1.AppComponent\r\n\t        ],\r\n\t        bootstrap: [app_component_1.AppComponent]\r\n\t    }),\r\n\t    __metadata(\"design:paramtypes\", [])\r\n\t], AppModule);\r\n\texports.AppModule = AppModule;\r\n\n\n/***/ },\n\n/***/ 24:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(THREE) {\"use strict\";\r\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n\t};\r\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\r\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n\t};\r\n\tvar core_1 = __webpack_require__(3);\r\n\tvar update_service_1 = __webpack_require__(26);\r\n\tvar light_component_1 = __webpack_require__(27);\r\n\tvar skybox_component_1 = __webpack_require__(28);\r\n\tvar loader_service_1 = __webpack_require__(30);\r\n\tvar physics_service_1 = __webpack_require__(31);\r\n\tvar key_service_1 = __webpack_require__(143);\r\n\tvar AppComponent = (function () {\r\n\t    function AppComponent(_updateService, _lightComponent, _loader, _physicsService, _keyService, _skyboxComponent) {\r\n\t        this._updateService = _updateService;\r\n\t        this._lightComponent = _lightComponent;\r\n\t        this._loader = _loader;\r\n\t        this._physicsService = _physicsService;\r\n\t        this._keyService = _keyService;\r\n\t        this._skyboxComponent = _skyboxComponent;\r\n\t        this.gui = {\r\n\t            speed: 0,\r\n\t            gravity: 0,\r\n\t            lapTime: 0\r\n\t        };\r\n\t        this.loaded = {\r\n\t            level: false,\r\n\t            user: false,\r\n\t            skybox: false,\r\n\t        };\r\n\t        this.general = {\r\n\t            dt: 0,\r\n\t            last: 0,\r\n\t            frame: 0\r\n\t        };\r\n\t        this.keys = {\r\n\t            UP: false,\r\n\t            DOWN: false,\r\n\t            LEFT: false,\r\n\t            RIGHT: false\r\n\t        };\r\n\t        this.state = {\r\n\t            dead: false\r\n\t        };\r\n\t        this.scene = new THREE.Scene();\r\n\t        this.camera = new THREE.PerspectiveCamera(75, 1280 / 720, 1, 200000);\r\n\t        this.renderer = new THREE.WebGLRenderer();\r\n\t    }\r\n\t    //***********************\r\n\t    //setup key handlers\r\n\t    //***********************\r\n\t    AppComponent.prototype.handleKeyDown = function (event) {\r\n\t        this.keys = this._keyService.onKeyPress(event, true);\r\n\t    };\r\n\t    AppComponent.prototype.handleKeyUp = function (event) {\r\n\t        this.keys = this._keyService.onKeyPress(event, false);\r\n\t    };\r\n\t    //***********************\r\n\t    //on component load\r\n\t    //***********************\r\n\t    AppComponent.prototype.ngOnInit = function () {\r\n\t        this.loader();\r\n\t    };\r\n\t    AppComponent.prototype.loader = function () {\r\n\t        var _this = this;\r\n\t        this.light = this._lightComponent.addAmbientLight();\r\n\t        this.pointLight = this._lightComponent.addPointLight();\r\n\t        var player = __webpack_require__(144);\r\n\t        var playerText = __webpack_require__(145);\r\n\t        this._loader.loadOBJ(player, playerText).then(function (res) {\r\n\t            res.name = \"player\";\r\n\t            _this.player = res;\r\n\t            _this.handleLoaded(\"user\");\r\n\t        });\r\n\t        var level = __webpack_require__(146);\r\n\t        var levelText = __webpack_require__(147);\r\n\t        this._loader.loadOBJ(level, levelText).then(function (res) {\r\n\t            res.name = \"model\";\r\n\t            _this.level = res;\r\n\t            _this.handleLoaded(\"level\");\r\n\t        });\r\n\t        this._skyboxComponent.init().then(function (res) {\r\n\t            res.name = \"skyBox\";\r\n\t            _this.skyBox = res;\r\n\t            _this.handleLoaded(\"skybox\");\r\n\t        });\r\n\t    };\r\n\t    //handles async loading on components\r\n\t    AppComponent.prototype.handleLoaded = function (loadType) {\r\n\t        this.loaded[loadType] = true;\r\n\t        var ready = true;\r\n\t        for (var x in this.loaded) {\r\n\t            if (!this.loaded[x])\r\n\t                ready = false;\r\n\t        }\r\n\t        if (ready) {\r\n\t            this.setup();\r\n\t        }\r\n\t    };\r\n\t    AppComponent.prototype.reloadGame = function () {\r\n\t        this.state.dead = false;\r\n\t        this.player.position.x = 0;\r\n\t        this.player.position.y = 0;\r\n\t        this.player.position.z = 0;\r\n\t        this.player.rotation.x = 0;\r\n\t        this.player.rotation.y = 0;\r\n\t        this.player.rotation.z = 0;\r\n\t        this.skyBox.position.copy(this.player.position);\r\n\t        this.camera.position.copy(this.player.position);\r\n\t        this._updateService.reset();\r\n\t        this.animate();\r\n\t        console.log(this.player.position);\r\n\t    };\r\n\t    //***********************\r\n\t    //setup\r\n\t    //***********************\r\n\t    AppComponent.prototype.setup = function () {\r\n\t        this.setupInitState();\r\n\t        this.addObjectsToScene();\r\n\t        this.addBoundingBoxesToScene();\r\n\t        this._canvas.nativeElement.appendChild(this.renderer.domElement);\r\n\t        this._physicsService.setupGravity(this.scene);\r\n\t        this.animate();\r\n\t    };\r\n\t    AppComponent.prototype.setupInitState = function () {\r\n\t        this.skyBox.position.copy(this.camera.position);\r\n\t        this.pointLight.position.copy(this.camera.position);\r\n\t        this.renderer.setSize(1280, 720);\r\n\t    };\r\n\t    AppComponent.prototype.addObjectsToScene = function () {\r\n\t        this.scene.add(this.player);\r\n\t        this.scene.add(this.level);\r\n\t        this.scene.add(this.light);\r\n\t        this.scene.add(this.pointLight);\r\n\t        this.scene.add(this.skyBox);\r\n\t    };\r\n\t    AppComponent.prototype.addBoundingBoxesToScene = function () {\r\n\t        var geometry2 = new THREE.BoxGeometry(60000, 1, 60000);\r\n\t        var material2 = new THREE.MeshBasicMaterial();\r\n\t        material2.visible = false;\r\n\t        var cube2 = new THREE.Mesh(geometry2, material2);\r\n\t        cube2.position.y = -2000;\r\n\t        cube2.name = \"death\";\r\n\t        this.scene.add(cube2);\r\n\t    };\r\n\t    //***********************\r\n\t    //animations\r\n\t    //***********************\r\n\t    AppComponent.prototype.animate = function () {\r\n\t        var _this = this;\r\n\t        var now = new Date().getTime();\r\n\t        this.general.dt = Math.min(1, (now - this.general.last) / 1000);\r\n\t        this.general.last = now;\r\n\t        this.render();\r\n\t        if (!this.state.dead) {\r\n\t            this.general.frame++;\r\n\t            if (this.general.frame > 24) {\r\n\t                this.general.frame = 0;\r\n\t            }\r\n\t            requestAnimationFrame(function () { return _this.animate(); });\r\n\t        }\r\n\t    };\r\n\t    AppComponent.prototype.render = function () {\r\n\t        this.gui.speed = this._updateService.update(this.player, this.camera, this.keys, this.general.dt);\r\n\t        var obj = this._physicsService.GravityCheck(this.player, this.general.frame);\r\n\t        if (obj.d) {\r\n\t            this.state.dead = true;\r\n\t        }\r\n\t        this.gui.lapTime = obj.lt;\r\n\t        // if (this.gui.lapTime < this.gui.bestLap) {\r\n\t        //     this.gui.bestLap = this.gui.lapTime;\r\n\t        // }\r\n\t        this.gui.gravity = obj.g;\r\n\t        //keep skyBox around bike\r\n\t        this.skyBox.position.copy(this.player.position);\r\n\t        this.renderer.render(this.scene, this.camera);\r\n\t    };\r\n\t    return AppComponent;\r\n\t}());\r\n\t__decorate([\r\n\t    core_1.ViewChild(\"canvas\"),\r\n\t    __metadata(\"design:type\", core_1.ElementRef)\r\n\t], AppComponent.prototype, \"_canvas\", void 0);\r\n\t__decorate([\r\n\t    core_1.HostListener('document:keydown', ['$event']),\r\n\t    __metadata(\"design:type\", Function),\r\n\t    __metadata(\"design:paramtypes\", [KeyboardEvent]),\r\n\t    __metadata(\"design:returntype\", void 0)\r\n\t], AppComponent.prototype, \"handleKeyDown\", null);\r\n\t__decorate([\r\n\t    core_1.HostListener('document:keyup', ['$event']),\r\n\t    __metadata(\"design:type\", Function),\r\n\t    __metadata(\"design:paramtypes\", [KeyboardEvent]),\r\n\t    __metadata(\"design:returntype\", void 0)\r\n\t], AppComponent.prototype, \"handleKeyUp\", null);\r\n\tAppComponent = __decorate([\r\n\t    core_1.Component({\r\n\t        selector: 'app',\r\n\t        template: __webpack_require__(148),\r\n\t        providers: [update_service_1.UpdateService,\r\n\t            light_component_1.LightComponent,\r\n\t            skybox_component_1.SkyboxComponent,\r\n\t            loader_service_1.LoaderService,\r\n\t            physics_service_1.PhysicsService,\r\n\t            key_service_1.KeyService]\r\n\t    }),\r\n\t    __metadata(\"design:paramtypes\", [update_service_1.UpdateService,\r\n\t        light_component_1.LightComponent,\r\n\t        loader_service_1.LoaderService,\r\n\t        physics_service_1.PhysicsService,\r\n\t        key_service_1.KeyService,\r\n\t        skybox_component_1.SkyboxComponent])\r\n\t], AppComponent);\r\n\texports.AppComponent = AppComponent;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ },\n\n/***/ 26:\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar UpdateService = (function () {\r\n\t    function UpdateService() {\r\n\t        this.acceleration = 0;\r\n\t        this.maxSpeed = 7;\r\n\t        this.generalCarSpeedMultiplier = 1000;\r\n\t        this.direction = {\r\n\t            X: 0,\r\n\t            Z: 0,\r\n\t            Y: 0,\r\n\t        };\r\n\t    }\r\n\t    UpdateService.prototype.init = function () {\r\n\t    };\r\n\t    UpdateService.prototype.reset = function () {\r\n\t        this.acceleration = 0;\r\n\t    };\r\n\t    UpdateService.prototype.update = function (car, camera, keys, dt) {\r\n\t        var step = dt * this.generalCarSpeedMultiplier;\r\n\t        this.direction = {\r\n\t            X: 0,\r\n\t            Z: 0,\r\n\t            Y: 0,\r\n\t        };\r\n\t        if (this.acceleration > 0) {\r\n\t            this.acceleration -= 0.0012;\r\n\t            if (car.rotation.x > 0.00)\r\n\t                car.rotateX(-0.001);\r\n\t        }\r\n\t        else {\r\n\t            this.acceleration += 0.0012;\r\n\t        }\r\n\t        if (keys.UP) {\r\n\t            if (this.acceleration < this.maxSpeed) {\r\n\t                if (this.acceleration < 0) {\r\n\t                    this.acceleration += 0.03;\r\n\t                }\r\n\t                else {\r\n\t                    this.acceleration += 0.02;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        if (keys.DOWN) {\r\n\t            if (this.acceleration > -1.4) {\r\n\t                if (this.acceleration > 0) {\r\n\t                    this.acceleration -= 0.03;\r\n\t                }\r\n\t                else {\r\n\t                    this.acceleration -= 0.015;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        if (keys.LEFT) {\r\n\t            car.rotateY(0.02);\r\n\t        }\r\n\t        if (keys.RIGHT) {\r\n\t            car.rotateY(-0.02);\r\n\t        }\r\n\t        if (parseInt(Math.cos(car.rotation.z).toFixed(0)) > -1) {\r\n\t            this.direction.Z = step * this.acceleration * Math.cos(car.rotation.y);\r\n\t        }\r\n\t        else {\r\n\t            this.direction.Z = step * this.acceleration * -Math.cos(car.rotation.y);\r\n\t        }\r\n\t        this.direction.X = step * this.acceleration * Math.sin(car.rotation.y);\r\n\t        car.position.z -= this.direction.Z;\r\n\t        car.position.x -= this.direction.X;\r\n\t        car.position.y -= this.direction.Y;\r\n\t        camera.position.z -= this.direction.Z;\r\n\t        camera.position.x -= this.direction.X;\r\n\t        camera.position.y -= this.direction.Y;\r\n\t        camera.quaternion.slerp(car.quaternion, 0.1);\r\n\t        camera.position.y = car.position.y + 200;\r\n\t        return this.acceleration;\r\n\t    };\r\n\t    return UpdateService;\r\n\t}());\r\n\texports.UpdateService = UpdateService;\r\n\t/*\r\n\t moves the camera and the car in a 3D space.\r\n\t Z is forward\r\n\t X is left/right.\r\n\t The car rotates and gives the offsetY to the car.\r\n\t\r\n\t Rotate X - up/down\r\n\t Rotate Y - Left/Right\r\n\t Rotate Z = turn screen\r\n\t */ \r\n\n\n/***/ },\n\n/***/ 27:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(THREE) {\"use strict\";\r\n\tvar LightComponent = (function () {\r\n\t    function LightComponent() {\r\n\t        this.color = 0x404040;\r\n\t        this.whiteColor = 0xddbfbf;\r\n\t    }\r\n\t    LightComponent.prototype.addAmbientLight = function () {\r\n\t        return new THREE.AmbientLight(this.whiteColor, 1);\r\n\t    };\r\n\t    LightComponent.prototype.addPointLight = function () {\r\n\t        return new THREE.DirectionalLight(this.color, 1);\r\n\t    };\r\n\t    return LightComponent;\r\n\t}());\r\n\texports.LightComponent = LightComponent;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ },\n\n/***/ 28:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(THREE) {\"use strict\";\r\n\tvar SkyboxComponent = (function () {\r\n\t    function SkyboxComponent() {\r\n\t    }\r\n\t    SkyboxComponent.prototype.init = function () {\r\n\t        var skyGeo = new THREE.SphereGeometry(10000, 25, 25);\r\n\t        var loader = new THREE.TextureLoader();\r\n\t        return new Promise(function (resolve, reject) {\r\n\t            loader.load(__webpack_require__(29), function (texture) {\r\n\t                var material = new THREE.MeshPhongMaterial({\r\n\t                    map: texture,\r\n\t                });\r\n\t                var sky = new THREE.Mesh(skyGeo, material);\r\n\t                sky.material.side = THREE.BackSide;\r\n\t                resolve(sky);\r\n\t            });\r\n\t        });\r\n\t    };\r\n\t    return SkyboxComponent;\r\n\t}());\r\n\texports.SkyboxComponent = SkyboxComponent;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ },\n\n/***/ 29:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"assets/skySphere_2.66ae058ccbfea529122c6bdf47620ac5.jpg\";\n\n/***/ },\n\n/***/ 30:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(THREE) {\"use strict\";\r\n\tvar LoaderService = (function () {\r\n\t    function LoaderService() {\r\n\t    }\r\n\t    LoaderService.prototype.loadOBJ = function (path, textureFile) {\r\n\t        var manager = new THREE.LoadingManager();\r\n\t        manager.onProgress = function (item, loaded, total) {\r\n\t            console.log(item, loaded, total);\r\n\t        };\r\n\t        var loader = new THREE.OBJLoader(manager);\r\n\t        var texture = new THREE.TextureLoader().load(textureFile);\r\n\t        texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\r\n\t        texture.repeat.set(2, 2);\r\n\t        return new Promise(function (resolve, reject) {\r\n\t            loader.load(path, function (object) {\r\n\t                object.traverse(function (child) {\r\n\t                    if (child instanceof THREE.Mesh) {\r\n\t                        child.material.map = texture;\r\n\t                    }\r\n\t                });\r\n\t                resolve(object);\r\n\t            });\r\n\t        });\r\n\t    };\r\n\t    return LoaderService;\r\n\t}());\r\n\texports.LoaderService = LoaderService;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ },\n\n/***/ 31:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(THREE) {\"use strict\";\r\n\tvar moment = __webpack_require__(32);\r\n\tvar PhysicsService = (function () {\r\n\t    function PhysicsService() {\r\n\t        this.groundList = [];\r\n\t        this.collidableMeshList = [];\r\n\t        this.rays = [\r\n\t            new THREE.Vector3(0, 0, 1),\r\n\t            new THREE.Vector3(0, 0, -1),\r\n\t            new THREE.Vector3(1, 0, 0),\r\n\t            new THREE.Vector3(1, 0, 1),\r\n\t            new THREE.Vector3(1, 0, -1),\r\n\t            new THREE.Vector3(-1, 0, 0),\r\n\t            new THREE.Vector3(-1, 0, 1),\r\n\t            new THREE.Vector3(-1, 0, -1),\r\n\t            new THREE.Vector3(0, 1, 0),\r\n\t            new THREE.Vector3(0, 1, 1),\r\n\t            new THREE.Vector3(0, 1, -1),\r\n\t            new THREE.Vector3(1, 1, 0),\r\n\t            new THREE.Vector3(-1, 1, 0),\r\n\t            new THREE.Vector3(0, -1, 0),\r\n\t            new THREE.Vector3(0, -1, 1),\r\n\t            new THREE.Vector3(0, -1, -1),\r\n\t            new THREE.Vector3(-1, -1, 0),\r\n\t            new THREE.Vector3(1, -1, 0),\r\n\t            new THREE.Vector3(0, 0, 0) //18 : none\r\n\t        ];\r\n\t        this.caster = new THREE.Raycaster();\r\n\t        this.distanceAbove = 0;\r\n\t        this.distanceBelow = 0;\r\n\t        this.fallTime = 0;\r\n\t        this.intersect = false;\r\n\t    }\r\n\t    PhysicsService.prototype.setupGravity = function (scene) {\r\n\t        this.startTime = moment();\r\n\t        for (var x in scene.children) {\r\n\t            if (scene.children[x].name == 'model') {\r\n\t                var material_1 = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\r\n\t                this.level = new THREE.Mesh(scene.children[x].children[0].geometry, material_1);\r\n\t                this.level.position.y = 0;\r\n\t                // scene.add(this.level);\r\n\t                this.collidableMeshList.push(this.level);\r\n\t            }\r\n\t            if (scene.children[x].name == 'death') {\r\n\t                this.deathBB = new THREE.Box3().setFromObject(scene.children[x]);\r\n\t            }\r\n\t        }\r\n\t        var geometry = new THREE.BoxGeometry(2500, 2500, 1);\r\n\t        var material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\r\n\t        this.startLine = new THREE.Mesh(geometry, material);\r\n\t        this.startLine.position.z = 1250;\r\n\t        // scene.add( this.startLine );\r\n\t    };\r\n\t    PhysicsService.prototype.GravityCheck = function (player, frame) {\r\n\t        var playerBB = new THREE.Box3().setFromObject(player);\r\n\t        var death = (playerBB.min.y < this.deathBB.max.y);\r\n\t        var laptime = this.checkForCollision(player);\r\n\t        var outcome = 0;\r\n\t        this.distanceAbove = parseFloat(this.distanceAbove.toFixed(2));\r\n\t        this.distanceBelow = parseFloat(this.distanceBelow.toFixed(2));\r\n\t        if (this.distanceAbove <= 1) {\r\n\t            outcome -= this.distanceAbove * 0.6;\r\n\t        }\r\n\t        else if (this.distanceAbove > 1) {\r\n\t            outcome += this.distanceAbove * 0.6;\r\n\t        }\r\n\t        if (this.distanceBelow <= 1) {\r\n\t            outcome += this.distanceBelow * 0.2;\r\n\t        }\r\n\t        else if (this.distanceBelow > 1) {\r\n\t            outcome -= this.distanceBelow * 0.2;\r\n\t        }\r\n\t        //todo: deze nog uitbreiden zodat hij niet shockt\r\n\t        if (!this.intersect) {\r\n\t            outcome -= (25000 / (player.position.y - this.deathBB.min.y));\r\n\t        }\r\n\t        player.position.y += outcome;\r\n\t        return { d: death, g: outcome, lt: laptime };\r\n\t    };\r\n\t    PhysicsService.prototype.checkForCollision = function (player) {\r\n\t        var distance = 128;\r\n\t        var collisions;\r\n\t        var i;\r\n\t        var startCollisions;\r\n\t        this.intersect = false;\r\n\t        for (i = 0; i < this.rays.length; i += 1) {\r\n\t            this.caster.set(player.position, this.rays[i]);\r\n\t            collisions = this.caster.intersectObjects(this.collidableMeshList);\r\n\t            if (collisions.length > 0 && collisions[0].distance <= distance) {\r\n\t                if (i == 8) {\r\n\t                    this.intersect = true;\r\n\t                    this.distanceAbove = collisions[0].distance;\r\n\t                }\r\n\t                if (i == 13) {\r\n\t                    this.intersect = true;\r\n\t                    this.distanceBelow = collisions[0].distance;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        this.caster.set(player.position, this.rays[0]);\r\n\t        startCollisions = this.caster.intersectObject(this.startLine);\r\n\t        if (startCollisions.length > 0 && startCollisions[0].distance <= distance) {\r\n\t            this.startTime = moment();\r\n\t        }\r\n\t        var afterLap = moment();\r\n\t        return moment.utc(moment(afterLap, \"DD/MM/YYYY HH:mm:ss\").diff(moment(this.startTime, \"DD/MM/YYYY HH:mm:ss\"))).seconds();\r\n\t    };\r\n\t    return PhysicsService;\r\n\t}());\r\n\texports.PhysicsService = PhysicsService;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ },\n\n/***/ 143:\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar KeyService = (function () {\r\n\t    function KeyService() {\r\n\t        this.keys = {\r\n\t            UP: false,\r\n\t            DOWN: false,\r\n\t            LEFT: false,\r\n\t            RIGHT: false\r\n\t        };\r\n\t    }\r\n\t    KeyService.prototype.onKeyPress = function (event, keyDown) {\r\n\t        if (event.key == 'w' || event.keyCode == 38) {\r\n\t            this.keys.UP = keyDown;\r\n\t        }\r\n\t        else if (event.key == 's' || event.keyCode == 40) {\r\n\t            this.keys.DOWN = keyDown;\r\n\t        }\r\n\t        else if (event.key == 'a' || event.keyCode == 37) {\r\n\t            this.keys.LEFT = keyDown;\r\n\t        }\r\n\t        else if (event.key == 'd' || event.keyCode == 39) {\r\n\t            this.keys.RIGHT = keyDown;\r\n\t        }\r\n\t        return this.keys;\r\n\t    };\r\n\t    return KeyService;\r\n\t}());\r\n\texports.KeyService = KeyService;\r\n\n\n/***/ },\n\n/***/ 144:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"assets/bike_2.c7f1bf100e585ceb1e1b7b83f5d58b60.obj\";\n\n/***/ },\n\n/***/ 145:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"assets/tron.587552ce4be37cfd05ac08b4142849dd.png\";\n\n/***/ },\n\n/***/ 146:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"assets/level_lennart_2.cab7d4088be847c0ce89fea322aae254.obj\";\n\n/***/ },\n\n/***/ 147:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"assets/road.93905e756f18ec7cef67d3cc4f3fabd9.jpg\";\n\n/***/ },\n\n/***/ 148:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div #canvas class=\\\"main\\\">\\n    <div class=\\\"gui\\\">\\n        <progress class=\\\"speed-progress\\\" max=\\\"400\\\" [value]=\\\"gui.speed * 100\\\"></progress>\\n        <i class=\\\"speed\\\">{{(gui.speed * 100).toFixed(0)}} km/h</i>\\n        <i class=\\\"gravity\\\">{{(gui.gravity.toFixed(0))}} m</i>\\n        <i class=\\\"laptime\\\">Current: {{(gui.lapTime)}} sec</i>\\n        <i class=\\\"best-lap\\\">Best: {{(gui.bestLap)}} sec</i>\\n        <div [hidden]=\\\"!state.dead\\\">\\n\\n            <h2 >YOU DIEDEDEDED </h2>\\n            <button (click)=\\\"reloadGame()\\\">restart</button>\\n        </div>\\n    </div>\\n</div>\";\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// app.985fd47c831ebcedc7b2.js","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { enableProdMode } from '@angular/core';\nimport { AppModule } from './app/app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/main.ts","import { NgModule } from '@angular/core';\nimport { BrowserModule }  from '@angular/platform-browser';\nimport { AppComponent } from './app.component';\n@NgModule({\n    imports: [\n        BrowserModule\n    ],\n    declarations: [\n        AppComponent\n    ],\n    bootstrap: [ AppComponent ]\n})\nexport class AppModule { }\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/app/app.module.ts","import {Component, ViewChild, ElementRef, HostListener} from '@angular/core';\nimport {UpdateService} from \"./services/update.service\";\nimport {IKeyPress, IGravityCheckReturn} from \"./interface\";\nimport {LightComponent} from \"./light/light.component\";\nimport {SkyboxComponent} from \"./skybox/skybox.component\";\nimport {LoaderService} from \"./services/loader.service\";\nimport {PhysicsService} from \"./services/physics.service\";\nimport {KeyService} from \"./services/key.service\";\n\n\n@Component({\n    selector: 'app',\n    template: require('./app.component.html'),\n    providers : [UpdateService,\n        LightComponent,\n        SkyboxComponent,\n        LoaderService,\n        PhysicsService,\n        KeyService]\n})\nexport class AppComponent {\n    gui = {\n        speed : 0,\n        gravity : 0,\n        lapTime : 0\n        // bestLap : 100,\n    };\n\n    loaded = {\n        level: false,\n        user: false,\n        skybox: false,\n    };\n    \n    general = {\n        dt : 0,\n        last : 0,\n        frame : 0\n    };\n\n    keys : IKeyPress = {\n        UP: false,\n        DOWN: false,\n        LEFT: false,\n        RIGHT: false\n    };\n\n    player : THREE.Object3D;\n    light : THREE.Light;\n    pointLight : THREE.Light;\n    skyBox : THREE.Object3D;\n    level: THREE.Object3D;\n\n    state = {\n        dead : false\n    };\n\n\n    scene: any = new THREE.Scene();\n    camera = new THREE.PerspectiveCamera(75, 1280 / 720, 1, 200000);\n    renderer = new THREE.WebGLRenderer();\n\n    @ViewChild(\"canvas\") _canvas: ElementRef;\n\n    constructor(private _updateService: UpdateService,\n                private _lightComponent: LightComponent,\n                private _loader: LoaderService,\n                private _physicsService: PhysicsService,\n                private _keyService: KeyService,\n                private _skyboxComponent: SkyboxComponent) {\n\n    }\n\n    //***********************\n    //setup key handlers\n    //***********************\n\n    @HostListener('document:keydown', ['$event'])\n    handleKeyDown(event: KeyboardEvent) {\n        this.keys = this._keyService.onKeyPress(event, true);\n    }\n\n    @HostListener('document:keyup', ['$event'])\n    handleKeyUp(event: KeyboardEvent) {\n        this.keys = this._keyService.onKeyPress(event, false);\n    }\n\n    //***********************\n    //on component load\n    //***********************\n\n    ngOnInit() {\n        this.loader();\n    }\n\n    loader() {\n        this.light = this._lightComponent.addAmbientLight();\n        this.pointLight = this._lightComponent.addPointLight();\n\n        const player = require(\"../../assets/objects/bike_2.obj\");\n        const playerText = require(\"../../assets/textures/tron.png\");\n        this._loader.loadOBJ(player, playerText).then(\n            (res: THREE.Object3D) => {\n                res.name = \"player\";\n                this.player = res;\n                this.handleLoaded(\"user\");\n            }\n        );\n\n        const level = require(\"../../assets/objects/level_lennart_2.obj\");\n        const levelText = require(\"../../assets/textures/road.jpg\");\n        this._loader.loadOBJ(level, levelText).then(\n            (res: THREE.Object3D) => {\n                res.name = \"model\";\n                this.level = res;\n                this.handleLoaded(\"level\");\n            }\n        );\n\n        this._skyboxComponent.init().then(\n            (res: THREE.Object3D) => {\n                res.name = \"skyBox\";\n                this.skyBox = res;\n                this.handleLoaded(\"skybox\");\n            }\n        );\n    }\n\n    //handles async loading on components\n    handleLoaded(loadType : string) {\n        this.loaded[loadType] = true;\n        let ready = true;\n\n        for (let x in this.loaded) {\n            if (!this.loaded[x]) ready = false;\n        }\n        if (ready) {\n            this.setup();\n        }\n    }\n\n    reloadGame() {\n        this.state.dead = false;\n        this.player.position.x = 0;\n        this.player.position.y = 0;\n        this.player.position.z = 0;\n        this.player.rotation.x = 0;\n        this.player.rotation.y = 0;\n        this.player.rotation.z = 0;\n        this.skyBox.position.copy(this.player.position);\n        this.camera.position.copy(this.player.position);\n        this._updateService.reset();\n        this.animate();\n        console.log(this.player.position)\n    }\n\n    //***********************\n    //setup\n    //***********************\n\n    setup() {\n        this.setupInitState();\n        this.addObjectsToScene();\n        this.addBoundingBoxesToScene();\n        this._canvas.nativeElement.appendChild(this.renderer.domElement);\n        this._physicsService.setupGravity(this.scene);\n        this.animate();\n    }\n\n    setupInitState() {\n        this.skyBox.position.copy(this.camera.position);\n        this.pointLight.position.copy(this.camera.position);\n        this.renderer.setSize(1280, 720);\n    }\n\n    addObjectsToScene() {\n        this.scene.add( this.player );\n        this.scene.add( this.level );\n        this.scene.add( this.light );\n        this.scene.add( this.pointLight );\n        this.scene.add( this.skyBox );\n    }\n\n    addBoundingBoxesToScene() {\n        const geometry2 = new THREE.BoxGeometry( 60000, 1, 60000 );\n        const material2 = new THREE.MeshBasicMaterial();\n        material2.visible = false;\n        const cube2 = new THREE.Mesh( geometry2, material2 );\n        cube2.position.y = -2000;\n        cube2.name = \"death\";\n        this.scene.add( cube2 );\n    }\n\n    //***********************\n    //animations\n    //***********************\n\n    animate() {\n        const now = new Date().getTime();\n        this.general.dt = Math.min(1, (now - this.general.last) / 1000);\n        this.general.last = now;\n        this.render();\n        if (!this.state.dead) {\n            this.general.frame++;\n            if (this.general.frame > 24) {\n                this.general.frame = 0;\n            }\n            requestAnimationFrame(() => this.animate());\n        }\n    }\n\n    render() {\n        this.gui.speed = this._updateService.update(this.player, this.camera, this.keys, this.general.dt);\n        const obj : IGravityCheckReturn = this._physicsService.GravityCheck(this.player, this.general.frame);\n        if (obj.d) {\n            this.state.dead = true;\n        }\n        this.gui.lapTime = obj.lt;\n        // if (this.gui.lapTime < this.gui.bestLap) {\n        //     this.gui.bestLap = this.gui.lapTime;\n        // }\n        this.gui.gravity = obj.g;\n        //keep skyBox around bike\n        this.skyBox.position.copy(this.player.position);\n        this.renderer.render(this.scene, this.camera);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/app/app.component.ts","import {IKeyPress} from \"../interface\";\nexport class UpdateService {\n    acceleration: number = 0;\n    maxSpeed : number = 7;\n    generalCarSpeedMultiplier: number =  1000;\n    direction = {\n        X: 0,\n        Z: 0,\n        Y : 0,\n    };\n\n    constructor() {\n\n    }\n\n    public init() {\n    }\n\n    public reset() {\n        this.acceleration = 0;\n    }\n\n    public update(car :any, camera :any, keys: IKeyPress, dt :number) : number {\n        const step = dt * this.generalCarSpeedMultiplier;\n        this.direction = {\n            X: 0,\n            Z: 0,\n            Y: 0,\n        };\n\n        if (this.acceleration > 0) {\n            this.acceleration -= 0.0012;\n            if (car.rotation.x > 0.00) car.rotateX(-0.001);\n        } else {\n            this.acceleration += 0.0012;\n        }\n\n        if (keys.UP) {\n            if (this.acceleration < this.maxSpeed) {\n                if (this.acceleration < 0) {\n                    this.acceleration += 0.03;\n                } else {\n                    this.acceleration += 0.02;\n                }\n            }\n        }\n        if (keys.DOWN) {\n            if (this.acceleration > -1.4) {\n                if (this.acceleration > 0) {\n                    this.acceleration -= 0.03;\n                } else {\n                    this.acceleration -= 0.015;\n                }\n            }\n        }\n\n        if (keys.LEFT) {\n            car.rotateY(0.02);\n        }\n        if (keys.RIGHT) {\n            car.rotateY(-0.02);\n        }\n\n        if (parseInt(Math.cos(car.rotation.z).toFixed(0)) > -1) {\n            this.direction.Z = step * this.acceleration * Math.cos(car.rotation.y);\n        } else {\n            this.direction.Z = step * this.acceleration * -Math.cos(car.rotation.y);\n        }\n\n        this.direction.X = step * this.acceleration * Math.sin(car.rotation.y);\n\n        car.position.z -= this.direction.Z;\n        car.position.x -= this.direction.X;\n        car.position.y -= this.direction.Y;\n\n        camera.position.z -= this.direction.Z;\n        camera.position.x -= this.direction.X;\n        camera.position.y -= this.direction.Y;\n\n        camera.quaternion.slerp(car.quaternion, 0.1);\n        camera.position.y = car.position.y + 200;\n\n\n        return this.acceleration;\n    }\n\n\n}\n\n/*\n moves the camera and the car in a 3D space.\n Z is forward\n X is left/right.\n The car rotates and gives the offsetY to the car.\n\n Rotate X - up/down\n Rotate Y - Left/Right\n Rotate Z = turn screen\n */\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/app/services/update.service.ts","export class LightComponent {\n\n    color: number = 0x404040;\n    whiteColor: number = 0xddbfbf;\n\n    constructor() {\n\n    }\n\n    public addAmbientLight() {\n        return new THREE.AmbientLight(this.whiteColor, 1);\n    }\n\n    public addPointLight() {\n        return new THREE.DirectionalLight(this.color, 1)\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/app/light/light.component.ts","import {ISkyBoxMapping} from \"../interface\";\nexport class SkyboxComponent {\n\n    init() {\n\n        const skyGeo = new THREE.SphereGeometry(10000, 25, 25);\n\n        const loader = new THREE.TextureLoader();\n        return new Promise(\n            (resolve, reject) => {\n                loader.load(require(\"../../../assets/textures/skySphere_2.jpg\"),\n                    (texture : any) => {\n                        const material = new THREE.MeshPhongMaterial({\n                            map: texture,\n                        });\n                        const sky = new THREE.Mesh(skyGeo, material);\n                        sky.material.side = THREE.BackSide;\n                        resolve(sky)\n                    });\n            }\n        )\n\n\n\n\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/app/skybox/skybox.component.ts","module.exports = __webpack_public_path__ + \"assets/skySphere_2.66ae058ccbfea529122c6bdf47620ac5.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/textures/skySphere_2.jpg\n// module id = 29\n// module chunks = 0","export class LoaderService {\n    constructor() {\n\n    }\n\n\n\n    loadOBJ(path : string, textureFile: string,) {\n        const manager = new THREE.LoadingManager();\n        manager.onProgress = function ( item, loaded, total ) {\n            console.log( item, loaded, total );\n        };\n        const loader = new THREE.OBJLoader( manager );\n        const texture = new THREE.TextureLoader().load(textureFile);\n        texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n        texture.repeat.set( 2, 2 );\n\n        return new Promise((resolve, reject) => {\n            loader.load(path, (object : THREE.Object3D) => {\n                object.traverse( function ( child :any ) {\n                    if ( child instanceof THREE.Mesh ) {\n                        child.material.map = texture;\n                    }\n                });\n                resolve(object);\n            });\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/app/services/loader.service.ts","import {IGravityCheckReturn, IGravityObject} from \"../interface\";\nimport Vector3 = THREE.Vector3;\nvar moment = require('moment');\n\nexport class PhysicsService {\n\n    groundList: THREE.Box3[] = [];\n    deathBB: THREE.Box3;\n    level: THREE.Mesh;\n    startLine : THREE.Mesh;\n    startTime: moment.Moment;\n\n    collidableMeshList: THREE.Mesh[] = [];\n\n    rays: THREE.Vector3[] = [\n        new THREE.Vector3(0, 0, 1),     //0: forward,\n        new THREE.Vector3(0, 0, -1),    //1 : backwards\n\n        new THREE.Vector3(1, 0, 0),     //2 : left\n        new THREE.Vector3(1, 0, 1),     //3 : forward left\n        new THREE.Vector3(1, 0, -1),    //4 : backwards left\n\n        new THREE.Vector3(-1, 0, 0),    //5 : right\n        new THREE.Vector3(-1, 0, 1),    //6 : forwards right\n        new THREE.Vector3(-1, 0, -1),   //7 : backwards right\n\n        new THREE.Vector3(0, 1, 0),     //8: above\n        new THREE.Vector3(0, 1, 1),     //9 : above - forward\n        new THREE.Vector3(0, 1, -1),    //10 : above - backward\n        new THREE.Vector3(1, 1, 0),     //11 : above - left\n        new THREE.Vector3(-1, 1, 0),    //12 : above - right\n\n        new THREE.Vector3(0, -1, 0),    //13 : below\n        new THREE.Vector3(0, -1, 1),    //14 : below - forward\n        new THREE.Vector3(0, -1, -1),   //15 : below - backward\n        new THREE.Vector3(-1, -1, 0),   //16 : below - right\n        new THREE.Vector3(1, -1, 0),   //17 : below - left\n\n        new THREE.Vector3(0, 0, 0)      //18 : none\n    ];\n\n\n    caster: THREE.Raycaster = new THREE.Raycaster();\n\n    distanceAbove : number = 0;\n    distanceBelow : number = 0;\n\n    fallTime : number = 0;\n    intersect:boolean = false;\n\n\n    setupGravity(scene: THREE.Scene) {\n        this.startTime = moment();\n        for (let x in scene.children) {\n            if (scene.children[x].name == 'model') {\n                const material = new THREE.MeshBasicMaterial({color: 0x00ff00});\n                this.level = new THREE.Mesh(scene.children[x].children[0].geometry, material);\n                this.level.position.y = 0;\n                // scene.add(this.level);\n                this.collidableMeshList.push(this.level);\n\n            }\n            if (scene.children[x].name == 'death') {\n                this.deathBB = new THREE.Box3().setFromObject(scene.children[x]);\n            }\n        }\n\n        const geometry = new THREE.BoxGeometry( 2500, 2500, 1 );\n        const material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );\n        this.startLine = new THREE.Mesh( geometry, material );\n        this.startLine.position.z = 1250;\n        // scene.add( this.startLine );\n\n    }\n\n    GravityCheck(player: THREE.Object3D, frame : number): IGravityCheckReturn {\n        const playerBB = new THREE.Box3().setFromObject(player);\n        let death = (playerBB.min.y < this.deathBB.max.y);\n        const laptime =  this.checkForCollision(player);\n        let outcome = 0;\n\n        this.distanceAbove = parseFloat(this.distanceAbove.toFixed(2));\n        this.distanceBelow = parseFloat(this.distanceBelow.toFixed(2));\n\n        if (this.distanceAbove <= 1) {\n            outcome -= this.distanceAbove * 0.6;\n        } else if (this.distanceAbove > 1) {\n            outcome += this.distanceAbove * 0.6;\n        }\n        if (this.distanceBelow <= 1) {\n            outcome += this.distanceBelow * 0.2;\n        } else if (this.distanceBelow > 1) {\n            outcome -= this.distanceBelow * 0.2;\n        }\n        //todo: deze nog uitbreiden zodat hij niet shockt\n        if (!this.intersect) {\n            outcome -= (25000 / (player.position.y - this.deathBB.min.y));\n        }\n\n        player.position.y += outcome;\n        return {d: death, g: outcome, lt: laptime}\n    }\n\n    checkForCollision(player: THREE.Object3D) {\n        const distance = 128;\n        let collisions;\n        let i;\n        let startCollisions;\n\n        this.intersect = false;\n\n        for (i = 0; i < this.rays.length; i += 1) {\n            this.caster.set(player.position, this.rays[i]);\n            collisions = this.caster.intersectObjects(this.collidableMeshList);\n            if (collisions.length > 0 && collisions[0].distance <= distance) {\n                if (i == 8) {\n                    this.intersect = true;\n                    this.distanceAbove = collisions[0].distance;\n                }\n                if (i == 13) {\n                    this.intersect = true;\n                    this.distanceBelow = collisions[0].distance;\n               }\n            }\n        }\n        this.caster.set(player.position, this.rays[0]);\n        startCollisions = this.caster.intersectObject(this.startLine);\n        if (startCollisions.length > 0 && startCollisions[0].distance <= distance) {\n            this.startTime = moment();\n\n        }\n        const afterLap = moment();\n        return moment.utc(moment(afterLap,\"DD/MM/YYYY HH:mm:ss\").diff(moment(this.startTime,\"DD/MM/YYYY HH:mm:ss\"))).seconds();\n\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/app/services/physics.service.ts","import {IKeyPress} from \"../interface\";\nexport class KeyService {\n\n    keys : IKeyPress = {\n        UP: false,\n        DOWN: false,\n        LEFT: false,\n        RIGHT: false\n    };\n\n    onKeyPress(event: any, keyDown: boolean) {\n        if (event.key == 'w' || event.keyCode == 38) {\n            this.keys.UP = keyDown;\n        } else if (event.key == 's' || event.keyCode == 40) {\n            this.keys.DOWN = keyDown;\n        } else if (event.key == 'a' || event.keyCode == 37) {\n            this.keys.LEFT = keyDown;\n        } else if (event.key == 'd' || event.keyCode == 39) {\n            this.keys.RIGHT = keyDown;\n        }\n\n        return this.keys\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/app/services/key.service.ts","module.exports = __webpack_public_path__ + \"assets/bike_2.c7f1bf100e585ceb1e1b7b83f5d58b60.obj\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/objects/bike_2.obj\n// module id = 144\n// module chunks = 0","module.exports = __webpack_public_path__ + \"assets/tron.587552ce4be37cfd05ac08b4142849dd.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/textures/tron.png\n// module id = 145\n// module chunks = 0","module.exports = __webpack_public_path__ + \"assets/level_lennart_2.cab7d4088be847c0ce89fea322aae254.obj\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/objects/level_lennart_2.obj\n// module id = 146\n// module chunks = 0","module.exports = __webpack_public_path__ + \"assets/road.93905e756f18ec7cef67d3cc4f3fabd9.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/textures/road.jpg\n// module id = 147\n// module chunks = 0","module.exports = \"<div #canvas class=\\\"main\\\">\\n    <div class=\\\"gui\\\">\\n        <progress class=\\\"speed-progress\\\" max=\\\"400\\\" [value]=\\\"gui.speed * 100\\\"></progress>\\n        <i class=\\\"speed\\\">{{(gui.speed * 100).toFixed(0)}} km/h</i>\\n        <i class=\\\"gravity\\\">{{(gui.gravity.toFixed(0))}} m</i>\\n        <i class=\\\"laptime\\\">Current: {{(gui.lapTime)}} sec</i>\\n        <i class=\\\"best-lap\\\">Best: {{(gui.bestLap)}} sec</i>\\n        <div [hidden]=\\\"!state.dead\\\">\\n\\n            <h2 >YOU DIEDEDEDED </h2>\\n            <button (click)=\\\"reloadGame()\\\">restart</button>\\n        </div>\\n    </div>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 148\n// module chunks = 0"],"sourceRoot":""}