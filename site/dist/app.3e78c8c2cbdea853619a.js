webpackJsonp([0],[function(e,t,n){"use strict";var o=n(1),i=n(23);o.platformBrowserDynamic().bootstrapModule(i.AppModule)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=n(3),a=n(21),r=n(24),p=function(){function AppModule(){}return AppModule}();p=o([s.NgModule({imports:[a.BrowserModule],declarations:[r.AppComponent],bootstrap:[r.AppComponent]}),i("design:paramtypes",[])],p),t.AppModule=p},function(e,t,n){(function(e){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=n(3),a=n(26),r=n(27),p=n(28),c=n(35),h=function(){function AppComponent(t,n,o,i){this._carComponent=t,this._lightComponent=n,this._loader=o,this._skyboxComponent=i,this.gui={speed:0},this.general={dt:0,last:0},this.scene=new e.Scene,this.camera=new e.PerspectiveCamera(75,1280/720,1,1e5),this.renderer=new e.WebGLRenderer,this.keys={UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1}}return AppComponent.prototype.handleKeyDown=function(e){this.onKeyPress(e,!0)},AppComponent.prototype.handleKeyUp=function(e){this.onKeyPress(e,!1)},AppComponent.prototype.ngOnInit=function(){var e=this,t=n(37);this._loader.loadOBJ(t).then(function(t){return e.car=t});var o=n(38);this._loader.loadOBJ(o).then(function(t){return e.level=t}),this.light=this._lightComponent.init(),this.pointLight=this._lightComponent.addPointLight(),this.skyBox=this._skyboxComponent.init(),setTimeout(function(){return e.start()},5e3)},AppComponent.prototype.start=function(){var e=this;this.camera.position.z=600,this.camera.position.y=200,this.skyBox.position.copy(this.camera.position),this.pointLight.position.copy(this.camera.position),this.scene.add(this.car),this.scene.add(this.level),this.scene.add(this.light),this.scene.add(this.pointLight),this.scene.add(this.skyBox),this.renderer.setSize(1280,720),this._canvas.nativeElement.appendChild(this.renderer.domElement),setTimeout(function(){return e.animate()},1e3)},AppComponent.prototype.mouseMovement=function(e){},AppComponent.prototype.onKeyPress=function(e,t){"w"==e.key||38==e.keyCode?this.keys.UP=t:"s"==e.key||40==e.keyCode?this.keys.DOWN=t:"a"==e.key||37==e.keyCode?this.keys.LEFT=t:"d"!=e.key&&39!=e.keyCode||(this.keys.RIGHT=t)},AppComponent.prototype.animate=function(){var e=this,t=(new Date).getTime();this.general.dt=Math.min(1,(t-this.general.last)/1e3),this.general.last=t,this.draw(),requestAnimationFrame(function(){return e.animate()})},AppComponent.prototype.draw=function(){this.gui.speed=this._carComponent.move(this.car,this.camera,this.keys,this.general.dt),this.skyBox.position.copy(this.camera.position),this.renderer.render(this.scene,this.camera)},AppComponent}();o([s.ViewChild("canvas"),i("design:type",s.ElementRef)],h.prototype,"_canvas",void 0),o([s.HostListener("document:keydown",["$event"]),i("design:type",Function),i("design:paramtypes",[KeyboardEvent]),i("design:returntype",void 0)],h.prototype,"handleKeyDown",null),o([s.HostListener("document:keyup",["$event"]),i("design:type",Function),i("design:paramtypes",[KeyboardEvent]),i("design:returntype",void 0)],h.prototype,"handleKeyUp",null),h=o([s.Component({selector:"app",template:n(39),providers:[a.CarComponent,r.LightComponent,p.SkyboxComponent,c.LoaderService]}),i("design:paramtypes",[a.CarComponent,r.LightComponent,c.LoaderService,p.SkyboxComponent])],h),t.AppComponent=h}).call(t,n(25))},,function(e,t){"use strict";var n=function(){function CarComponent(){this.acceleration=0,this.generalCarSpeedMultiplier=1e3}return CarComponent.prototype.init=function(){},CarComponent.prototype.move=function(e,t,n,o){var i=e.rotation.y,s=o*this.generalCarSpeedMultiplier;return n.UP||n.DOWN||(this.acceleration>.01?this.acceleration-=.001*s:this.acceleration<-.01&&(this.acceleration+=.001*s)),n.UP&&this.acceleration<4&&(this.acceleration>=0?this.acceleration+=5e-4*s:this.acceleration+=.002*s),n.DOWN&&this.acceleration>-4&&(this.acceleration<=0?this.acceleration-=5e-4*s:this.acceleration-=.002*s),n.LEFT&&(t.rotateY(.005),e.rotateY(.01),t.position.x+=.2*s),n.RIGHT&&(t.rotateY(-.005),e.rotateY(-.01),t.position.x-=.2*s),t.position.z-=2*s*this.acceleration,e.position.z-=2*s*this.acceleration,e.position.x-=2*s*this.acceleration*(2*i),t.position.x-=2*s*this.acceleration*(2*i),this.acceleration},CarComponent}();t.CarComponent=n},function(e,t,n){(function(e){"use strict";var n=function(){function LightComponent(){this.color=4210752,this.whiteColor=16777215}return LightComponent.prototype.init=function(){return new e.AmbientLight(this.whiteColor,1)},LightComponent.prototype.addPointLight=function(){return new e.DirectionalLight(this.color,1)},LightComponent}();t.LightComponent=n}).call(t,n(25))},function(e,t,n){(function(e){"use strict";var o=function(){function SkyboxComponent(){this.urlPrefix="../../../assets/textures/skybox_",this.skyboxImages={posx:n(29),negy:n(30),posy:n(31),posz:n(32),negz:n(33),negx:n(34)},this.materialObject=[]}return SkyboxComponent.prototype.init=function(){var t=[];for(var n in this.skyboxImages)t.push(this.createMaterial(this.skyboxImages[n]));var o=new e.Mesh(new e.BoxGeometry(1e5,3e4,3e4,1,1,1),new e.MeshFaceMaterial(this.materialObject));return o.scale.set(-1,1,1),o},SkyboxComponent.prototype.createMaterial=function(t){var n=this,o=new e.TextureLoader;o.load(t,function(t){n.materialObject.push(new e.MeshBasicMaterial({map:t,overdraw:.5}))})},SkyboxComponent}();t.SkyboxComponent=o}).call(t,n(25))},function(e,t,n){e.exports=n.p+"assets/skybox_posx.86d5eefa3b5ba6f752e93f3128fa5197.jpg"},function(e,t,n){e.exports=n.p+"assets/skybox_negy.34a3317f948a052de6726f1bcdfc060e.jpg"},function(e,t,n){e.exports=n.p+"assets/skybox_posy.c180a6af9d308c3f8299696d9a15705f.jpg"},function(e,t,n){e.exports=n.p+"assets/skybox_posz.b71d44a35bdb4adaabbab8a61cc65d02.jpg"},function(e,t,n){e.exports=n.p+"assets/skybox_negz.e17caddd400315b99afcb9d55fe23a39.jpg"},function(e,t,n){e.exports=n.p+"assets/skybox_negx.c1ada4bc7114cd59fe65a61c6fc273d0.jpg"},function(e,t,n){(function(e){"use strict";var o=function(){function LoaderService(){}return LoaderService.prototype.loadOBJ=function(t){var o=new e.LoadingManager;o.onProgress=function(e,t,n){console.log(e,t,n)};var i=new e.OBJLoader(o),s=(new e.TextureLoader).load(n(36));return new Promise(function(n,o){i.load(t,function(t){console.log(t),t.traverse(function(t){t instanceof e.Mesh&&(console.log("instance"),t.material.map=s)}),n(t)})})},LoaderService}();t.LoaderService=o}).call(t,n(25))},function(e,t,n){e.exports=n.p+"assets/grey.22613f9b2b9c3ae9c50baaa11bd38461.png"},function(e,t,n){e.exports=n.p+"assets/bike_lennart.9613cd5bf1cf98d990a09a14d63987b4.obj"},function(e,t,n){e.exports=n.p+"assets/level_lennart.f6c5e941514ad165ace7ed2a865e1046.obj"},function(e,t){e.exports='<div #canvas class="main" (mousemove)="mouseMovement($event)" (keydown)="onKeyDown($event)">\n    <div class="gui">\n        <progress class="speed-progress" max="400" [value]="gui.speed * 100"></progress>\n        <i class="speed">{{(gui.speed * 100).toFixed(0)}} km/h</i>\n    </div>\n</div>'}]);
//# sourceMappingURL=app.3e78c8c2cbdea853619a.js.map